<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Twang Tutorial</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="oscillators.html"><strong aria-hidden="true">2.</strong> Oscillators</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="sine.html"><strong aria-hidden="true">2.1.</strong> Sinusoidal Oscillators</a></li><li class="chapter-item expanded "><a href="bezier.html"><strong aria-hidden="true">2.2.</strong> Bezier Oscillators</a></li><li class="chapter-item expanded "><a href="pulse.html"><strong aria-hidden="true">2.3.</strong> Pulse Oscillators</a></li></ol></li><li class="chapter-item expanded "><a href="noise.html"><strong aria-hidden="true">3.</strong> Noise</a></li><li class="chapter-item expanded "><a href="additive.html"><strong aria-hidden="true">4.</strong> Additive Synthesis</a></li><li class="chapter-item expanded "><a href="subtractive.html"><strong aria-hidden="true">5.</strong> Subtractive Synthesis</a></li><li class="chapter-item expanded "><a href="modulation.html"><strong aria-hidden="true">6.</strong> Angular Modulation Synthesis</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Twang Tutorial</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p>Twang is a Rust library for doing audio synthesis.  The API of Twang uses a
dependency tree (type of DAG or directed acyclic graph) of audio nodes rather
than supporting arbitrary graphs.  The tree makes it easier to visualize what's
happening during synthesis.  The root node of the tree is the final operation
that produces the synthesized sound.</p>
<p>This book will teach not only how to use Twang, but also about how all the
different methods of audio synthesis work.  Each chapter will cover a synthesis
method and provide an example of how to use it with Twang.  You will find that
the reason there are so many methods of synthesis is because they each make
their own unique type of sound from each other.  So if you want to synthesize
a specific type of sound, you choose a specific type of synthesis.  Here's a
little guide to help (you might find a way to synthesize a type of sound with a
different method than listed here, and that's ok - it's not an exact science):</p>
<ul>
<li><a href="additive.html">Additive Synthesis</a>: Electronic reproduction of a sound with
reduced quality, such as an "electric piano" sound</li>
<li><a href="subtractive.html">Subtractive Synthesis</a>: Electronic immitation of brass,
saxaphone, or any other sound with rich harmonic content</li>
<li>Frequency Modulation Synthesis: Electronic immitation of bells</li>
</ul>
<h2 id="digital-audio"><a class="header" href="#digital-audio">Digital Audio</a></h2>
<p>There's a great introduction to digital audio concepts on
<a href="https://developer.mozilla.org/en-US/docs/Web/Media/Formats/Audio_concepts">MDN</a>
that's worth checking out before reading this book.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="oscillators"><a class="header" href="#oscillators">Oscillators</a></h1>
<p>Oscillators are at the core of audio synthesis.  The basic concept is that a
sound is composed of a repeating pattern.  How many times this pattern repeats
is the frequency of the sound.  The higher the frequency (more times per second)
the higher the pitch.  The repeating pattern is often called a "waveform".</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sinusoidal-oscillators"><a class="header" href="#sinusoidal-oscillators">Sinusoidal Oscillators</a></h1>
<p>A sinusoidal oscillator is a repeating sine/cosine waveform.  There aren't any
parameters for changing the properties of the waveform.</p>
<h2 id="sound-theory"><a class="header" href="#sound-theory">Sound Theory</a></h2>
<p>All sounds are composed of a number of sine waves at different frequencies and
volumes.  Each of these sine waves are multiples of the original frequency, so
if the base frequency (the one you hear) is 440 HZ the next frequency is 880 HZ.
These frequencies are called harmonics.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="bezier-oscillators"><a class="header" href="#bezier-oscillators">Bezier Oscillators</a></h1>
<p>A bezier oscillator is a wrapping symmetrical quadratic bezier waveform.  But,
you don't really need to know what that means.  It has one parameter for
changing the properties of the waveform, called <code>curve</code>.  If you set <code>curve</code> to
0, it creates a sawtooth wave.</p>
<p><a href="https://www.desmos.com/calculator/u95z5dg2mq">See how changing the parameter affects the waveform</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="pulse-oscillators"><a class="header" href="#pulse-oscillators">Pulse Oscillators</a></h1>
<p>A pulse oscillator is the simplest waveform, because it only contains the
samples -1 (off) and 1 (on).  There are two parameters for changing the shape of
the waveform; First, there is <code>duty</code> which refers to the duty cycle - when set
to 0 produces a square wave (50% on/off; -1 is 100% off, 1 is 100% on).  Then,
there is <code>alias</code> which introduces aliasing.  The aliasing implemented in twang
is linear interpolation between the samples.  Set to -1 for rectangle, 0 for
trapazoid, and 1 for triangle wave.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="noise"><a class="header" href="#noise">Noise</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="additive-synthesis"><a class="header" href="#additive-synthesis">Additive Synthesis</a></h1>
<p>Additive synthesis is probably the simplest synthesis algorithm to understand.
The fundamental idea is that all sounds are made up of an infinite number of
sine waves at different volumes mixed together.  Of course, when synthesizing
you can only mix a finite amount of sine waves, otherwise you would be able to
synthesize any sound with additive synthesis!  That said, you can approximate
any sound with additive synthesis, even to the point where it's
indistiguishable!</p>
<p>But, additive synthesis isn't limited to just sine waves; You can use other
kinds of waveforms as well.  Interestingly, additive synthesis is actually the
exact same thing as mixing!  This means when you mix the two waveforms together,
you are able to hear both of them playing together.  Of course, the more
waveforms you add together, the more difficult it becomes to pick them out, and
the less it sounds like multiple "instruments" or "voices".</p>
<h2 id="fast-fourier-tranform"><a class="header" href="#fast-fourier-tranform">Fast Fourier Tranform</a></h2>
<p>TODO</p>
<h1 id="electric-piano-example"><a class="header" href="#electric-piano-example">(Electric) Piano Example</a></h1>
<p>TODO</p>
<p><a href="https://github.com/AldaronLau/twang/blob/stable/examples/piano.rs">Example Code</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="subtractive-synthesis"><a class="header" href="#subtractive-synthesis">Subtractive Synthesis</a></h1>
<p>Subtractive synthesis is (you guessed it!) the opposite of additive synthesis.
The fundamental idea is that you take a sound that naturally has an infinite
number of sine waves added together (lots of harmonics), and start reducing
ranges of frequencies with band-pass filters.  A bandpass filter is made of two
parts; a high-pass and a low-pass filter.  High-pass filters reduce the lower
frequencies, and let the higher frequencies pass through them unchanged.
Low-pass filters are just the opposite; the higher frequencies are reduced and
the low frequencies are left unchanged.  The means a band-pass filter reduces
any frequencies outside a band/range of frequencies.</p>
<h1 id="trumpet-example"><a class="header" href="#trumpet-example">Trumpet Example</a></h1>
<p>TODO</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="angular-modulation-synthesis"><a class="header" href="#angular-modulation-synthesis">Angular Modulation Synthesis</a></h1>
<p>Angular modulation includes both frequency modulation and phase modulation
synthesis.  The two are very similar methods, and essentially do the same thing.
The only difference is in the implementation; frequency modulation modulates the
velocity of the waveform, while phase modulation modulates the offset position.</p>
<p>Frequency modulation synthesis is when the frequency variable of an oscillator
is set to another waveform.</p>
<p>Phase modulation synthesis is when the phase variable of an oscillator is set to
another waveform.  Phase modulation synthesis was popular in 1980s synthesizers.</p>
<h2 id="phase-distortion"><a class="header" href="#phase-distortion">Phase Distortion</a></h2>
<p>Phase distortion builds upon angular modulation synthesis.</p>
<ol>
<li>Do angular modulation of a waveform</li>
<li>After each cycle of the lower frequency, reset the high frequency oscillator</li>
<li>Multiply by decreasing sawtooth wave at the lower frequency to hide the
"jump"</li>
</ol>
<h2 id="waveshaping-direct-phase-modulation"><a class="header" href="#waveshaping-direct-phase-modulation">Waveshaping (Direct Phase Modulation)</a></h2>
<p>Waveshaping builds upon phase modulation synthesis.  In this type of modulation,
the two oscillators used must have the same frequency.</p>
<h2 id="phase-limiting"><a class="header" href="#phase-limiting">Phase Limiting</a></h2>
<p>Phase limiting is an improvement on the phase distortion synthesis "invented" by
Casio (which as far as I know, was "invented" by me - Jeron Aldaron Lau).  The
idea is simple; take the first two steps of phase distortion synthesis as they
are, then instead of multiplying by a decreasing sawtooth oscillator, multiply
by a decreasing bezier oscillator.  This reduces the amount of lost amplitude
during phase distortion synthesis.  Additionally, splice a plateau at the
beginning of the bezier waveform to only diminish the amplitude after the phase
has passed a specified point.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
